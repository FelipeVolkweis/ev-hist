<!DOCTYPE html>
<html>
<head>
  <title>Tennis for Two</title>
  <style>
    canvas {
      background-color: #000;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="640" height="480"></canvas>

  <script>
    // Obtém o elemento canvas
    var canvas = document.getElementById("gameCanvas");
    var ctx = canvas.getContext("2d");

    // Define as dimensões do campo de tênis
    var courtWidth = canvas.width;
    var courtHeight = canvas.height;

    // Define a posição e o tamanho da bolinha
    var ballX = courtWidth / 2;
    var ballY = courtHeight / 2;
    var ballRadius = 5;
    var ballSpeedX = 1;
    var ballSpeedY = 1;

    // Define a posição e o tamanho da rede
    var netWidth = 2;
    var netHeight = courtHeight;
    var netX = courtWidth / 2 - netWidth / 2;
    var netY = 0;

    // Define as informações dos jogadores
    var player = {
      position: courtHeight / 2,
      color: "#00ff00"
    };

    var opponent = {
      position: courtHeight / 2,
      color: "#ff0000"
    };

    // Define o estado do jogo
    var ballInPlay = false;

    // Função de atualização do jogo
    function update() {
      // Move a bolinha
      if (ballInPlay) {
        ballX += ballSpeedX;
        ballY += ballSpeedY;
      }

      // Verifica colisão com as paredes superior e inferior
      if (ballY + ballRadius > courtHeight || ballY - ballRadius < 0) {
        ballSpeedY *= -1;
      }

      // Verifica colisão com os jogadores
      if (
        ballX - ballRadius <= 0 &&
        ballY + ballRadius >= player.position - 20 &&
        ballY - ballRadius <= player.position + 20
      ) {
        ballSpeedX *= -1;
      } else if (
        ballX + ballRadius >= courtWidth &&
        ballY + ballRadius >= opponent.position - 20 &&
        ballY - ballRadius <= opponent.position + 20
      ) {
        ballSpeedX *= -1;
      }

      // Limpa a tela
      ctx.clearRect(0, 0, courtWidth, courtHeight);

      // Desenha a bolinha
      ctx.beginPath();
      ctx.arc(ballX, ballY, ballRadius, 0, Math.PI * 2, false);
      ctx.fillStyle = "#fff";
      ctx.fill();
      ctx.closePath();

      // Desenha a rede
      ctx.fillStyle = "#fff";
      ctx.fillRect(netX, netY, netWidth, netHeight);

      // Desenha o jogador
      ctx.fillStyle = player.color;
      ctx.fillRect(0, player.position - 20, 5, 40);

      // Desenha o oponente
      ctx.fillStyle = opponent.color;
      ctx.fillRect(courtWidth - 5, opponent.position - 20, 5, 40);

      // Chama a função update novamente após 16ms (60 quadros por segundo)
      requestAnimationFrame(update);
    }

    // Funções para controlar o movimento do jogador com as teclas de seta
    document.addEventListener("keydown", function (event) {
      if (event.key === "ArrowUp") {
        player.position -= 5;
      } else if (event.key === "ArrowDown") {
        player.position += 5;
      }
    });

    document.addEventListener("keyup", function (event) {
      if (event.key === "ArrowUp" || event.key === "ArrowDown") {
        // Verifica se a bola está em jogo antes de permitir que o jogador pressione o botão
        if (!ballInPlay) {
          ballInPlay = true;
          ballSpeedX = 1;
          ballSpeedY = 1;
        }
      }
    });

    // Inicia o jogo
    update();
  </script>
</body>
</html>
